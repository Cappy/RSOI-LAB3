<div *ngIf="tableMode; else create">
<h2>Список гостей</h2>

<p>
    <a class="btn btn-default btn-sm" (click)="add()" role="button"><span class="glyphicon glyphicon glyphicon-plus"></span> Добавить запись</a>
</p>

<div class="form-horizontal">
<div class="col-md-7"></div>
<label class="col-md-3">Количество записей на странице:</label>
	<div class="col-md-1">
		<input onkeydown="if (event.keyCode == 8) event.preventDefault();" onkeypress="return event.charCode > 48;" class="form-control" [(ngModel)]="size" type="number" value="size" min="1" max="50">
	</div>
	<a class="btn btn-default btn-sm" (click)="loadCustomers()" role="button"><span class="glyphicon glyphicon glyphicon-ok"></span> Применить</a>
</div>  

<table *ngIf="tableMode; else create" class="table table-striped">
    <thead>
        <tr>
            <td><b>Имя</b></td>
            <td><b>Фамилия</b></td>
            <td><b>Номер телефона</b></td>
            <td></td>
        </tr>
    </thead>
    <tbody>
        <tr *ngFor="let c of customers | paginate: { itemsPerPage: size, currentPage: page, totalItems: customersCount }">
            <ng-template [ngIf]="customer?.customerId != c.customerId" [ngIfElse]="edit">
                <td class="col-md-2">{{c?.name}}</td>
                <td class="col-md-2">{{c?.surname}}</td>
                <td class="col-md-2">{{c?.phoneNumber}}</td>
                <td class="col-md-2">	
					<a class="btn btn-warning btn-xs btn-space" (click)="editCustomer(c)" role="button"><span class="glyphicon glyphicon-pencil"></span> Изменить</a>
					<a class="btn btn-danger btn-xs" (click)="delete(c)" role="button"><span class="glyphicon glyphicon-remove"></span> Удалить</a>	
                </td>
            </ng-template>
        </tr>
    </tbody>
</table>

<div class="text-center">
<pagination-controls 
	previousLabel="Назад"
    nextLabel="Вперёд"
	(pageChange)="page = $event; loadCustomers();">
</pagination-controls>     
</div>        

</div>
 
<!--шаблон для редактирования-->
<ng-template #edit>
    <td class="col-md-2">
        <input required type="text" [(ngModel)]="customer.name" class="form-control" />
    </td>
    <td class="col-md-2">
        <input required type="text" [(ngModel)]="customer.surname" class="form-control" />
    </td>
    <td class="col-md-2">
        <input required type="number" [(ngModel)]="customer.phoneNumber" class="form-control" />
    </td>
    <td>
		<a class="btn btn-xs btn-success btn-space" (click)="save()" role="button"><span class="glyphicon glyphicon-ok"></span> Сохранить</a>
		<a class="btn btn-danger btn-xs" (click)="cancel()" role="button"><span class="glyphicon glyphicon-remove"></span> Отмена</a>
    </td>
</ng-template>
 
<!--шаблон для добавления-->
<ng-template #create>
<div class="form-horizontal">
<h2>Добавление гостя</h2>
<br>
    <div class="form-group">
        <label class="col-md-3">Имя</label>
		<div class="col-md-3">
        <input type="text" [(ngModel)]="customer.name" class="form-control" />
		</div>
    </div>
    <div class="form-group">
        <label class="col-md-3">Фамилия</label>
		<div class="col-md-3">
        <input type="text" [(ngModel)]="customer.surname" class="form-control" />
		</div>
    </div>
    <div class="form-group">
	<label class="col-md-3">Номер телефона</label>
	<div class="col-md-3">
        <input type="text" [(ngModel)]="customer.phoneNumber" class="form-control" />
		</div>
		
    </div>
	
	<div class="form-group">
		<div class="col-md-3"></div>
        <div class="col-md-3">
            <input type="button" value="Сохранить" (click)="save()" class="btn btn-success" />
        </div>
    </div>
	
	<div>
    <a class="btn btn-default btn-sm" (click)="cancel()" role="button"><span class="glyphicon glyphicon-chevron-left"></span> Вернуться к списку</a>
	</div>
	
</div>
</ng-template>